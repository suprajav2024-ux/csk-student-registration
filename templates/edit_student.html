{% extends "base.html" %}
{% block content %}

<div class="container py-5">
    <div class="card shadow-sm p-4 mx-auto" style="max-width: 900px;">
        <h2 class="text-center mb-4">Edit Student</h2>

        <form method="POST">

            <div class="row mb-3">
                <div class="col-md-6">
                    <label class="form-label">Student Name</label>
                    <input type="text" class="form-control" name="name"
                           value="{{ student['Student Name'] }}" required>
                </div>

                <div class="col-md-3">
                    <label class="form-label">Grade</label>
                    <select class="form-select" name="grade" required>
                        {% for g in ['I','II','III','IV','V','VI','VII','VIII'] %}
                        <option value="{{ g }}"
                            {% if student['Class'] == g %}selected{% endif %}>
                            {{ g }}
                        </option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col-md-3">
                    <label class="form-label">Section</label>
                    <select class="form-select" name="section" required>
                        {% for s in ['A','B','C'] %}
                        <option value="{{ s }}"
                            {% if student['Section'] == s %}selected{% endif %}>
                            {{ s }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <h5 class="mt-4">Events</h5>
            <div class="row">

                {% set slots = [
                    ('10-11am','event_10_11','Event 10-11'),
                    ('11-12pm','event_11_12','Event 11-12'),
                    ('1-2pm','event_1_2','Event 1-2'),
                    ('2-3pm','event_2_3','Event 2-3')
                ] %}

                {% for label, field, sheet_key in slots %}
                <div class="col-md-3 mb-3">
                    <label class="form-label fw-bold">{{ label }}</label>
                    <select class="form-select" name="{{ field }}">
                        <option value="Not participating">Not participating</option>

                        {% for ev in event_options[student['Class']][label] %}
                        <option value="{{ ev }}"
                            {% if student[sheet_key] == ev %}selected{% endif %}>
                            {{ ev }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
                {% endfor %}

            </div>

            <button class="btn btn-primary w-100 mt-4">Update Student</button>
        </form>
    </div>
</div>

{% endblock %}
